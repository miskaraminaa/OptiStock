"use strict";(self.webpackChunkadmin_dashboard_template_OptiStock=self.webpackChunkadmin_dashboard_template_OptiStock||[]).push([[949],{1949:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var r=t(2791),a=t(3071),n=t(6564),l=t(4045),o=t(9434),i=t(5054),d=t(184);const c=()=>{const[e,s]=(0,r.useState)([]),[t,c]=(0,r.useState)([]),[m,x]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[p,b]=(0,r.useState)(""),[g,f]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[N,v]=(0,r.useState)(""),[w,k]=(0,r.useState)(""),[S,C]=(0,r.useState)(null),[E,_]=(0,r.useState)(!1),[T,D]=(0,r.useState)(!1),[q,I]=(0,r.useState)(1),P=(0,o.I0)(),L="http://localhost:5000",A=(0,r.useRef)(null);(0,r.useEffect)((()=>{P((0,i.Iw)({title:"Gestion des Dimensions"}))}),[P]),(0,r.useEffect)((()=>{(async()=>{_(!0),k("");try{var e;const t=await fetch("".concat(L,"/dimensions/ids"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));const r=(null===(e=(await t.json()).ids)||void 0===e?void 0:e.map(String).sort(((e,s)=>e.localeCompare(s))))||[];s(r)}catch(t){console.error("Error fetching IDs:",t),k("Erreur lors du chargement des IDs: ".concat(t.message))}finally{_(!1)}})()}),[L]),(0,r.useEffect)((()=>{(async()=>{D(!0),k("");try{const e=await fetch("".concat(L,"/dimensions/"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));const s=await e.json();c(s.data||[])}catch(e){console.error("Error fetching dimensions:",e),k("Erreur lors du chargement des dimensions: ".concat(e.message))}finally{D(!1)}})()}),[L]);const R=25*q,M=R-25,F=t.slice(M,R),H=Math.ceil(t.length/25);return E||T?(0,d.jsx)("div",{className:"mx-auto max-w-7xl p-4 sm:p-6",children:(0,d.jsxs)("div",{className:"flex flex-col justify-center items-center my-8",children:[(0,d.jsx)(n.Z,{color:"#3b82f6",size:40}),(0,d.jsx)("p",{className:"mt-4 text-gray-600",children:E?"Chargement des IDs...":"Chargement des dimensions..."}),(0,d.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Page ",q," sur ",H]})]})}):w&&w.includes("Erreur")?(0,d.jsx)("div",{className:"mx-auto max-w-7xl p-4 sm:p-6",children:(0,d.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"text-red-600 mr-3",children:"\u26a0\ufe0f"}),(0,d.jsx)("span",{className:"text-red-800 text-sm sm:text-base",children:w})]}),(0,d.jsx)("button",{onClick:()=>{k(""),_(!0),D(!0)},className:"px-4 py-2 bg-red-600 text-white rounded-lg shadow hover:bg-red-700 transition duration-200 flex items-center text-sm",children:"R\xe9essayer"})]})})}):(0,d.jsxs)("div",{className:"mx-auto max-w-7xl p-4 sm:p-6",children:[(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-2 flex items-center",children:[(0,d.jsx)(a.$m5,{className:"mr-3 text-blue-600"}),"Gestion des Dimensions"]}),(0,d.jsx)("p",{className:"text-gray-600 text-sm sm:text-base",children:"Ajouter ou explorer les dimensions des articles"})]}),(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6 no-print",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Ajouter/Modifier Dimensions"}),(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!m||!u||!p||!g||!j||!N)return void k("Tous les champs sont requis.");const s=parseFloat(u),t=parseFloat(p),r=parseFloat(g),a=parseFloat(j),n=parseInt(N,10);if(isNaN(s)||isNaN(t)||isNaN(r)||isNaN(a)||isNaN(n)||n<1)k("Veuillez entrer des valeurs num\xe9riques valides (quantit\xe9 \u2265 1).");else try{const e=e=>Number(e),s={id_article:m,longueur:e(u),largeur:e(p),hauteur:e(g),poids:e(j),qte:e(N)},t=await fetch("".concat(L,"/dimensions/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),r=await t.json();if(t.ok){k("Dimensions enregistr\xe9es avec succ\xe8s."),C(r.data[0]);const e=await fetch("".concat(L,"/dimensions/")),s=await e.json();c(s.data||[]),x(""),h(""),b(""),f(""),y(""),v("")}else k(r.message||"Erreur lors de l'enregistrement.")}catch(l){console.error("Error submitting dimensions:",l),k("Erreur serveur: "+l.message)}},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Article"}),(0,d.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"w-full p-2.5 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 text-sm",required:!0,children:[(0,d.jsx)("option",{value:"",children:"S\xe9lectionner un ID"}),e.map((e=>(0,d.jsx)("option",{value:e,children:e},e)))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longueur (m)"}),(0,d.jsx)("input",{type:"number",value:u,onChange:e=>h(e.target.value),className:"w-full p-2.5 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 text-sm",step:"0.01",min:"0",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Largeur (m)"}),(0,d.jsx)("input",{type:"number",value:p,onChange:e=>b(e.target.value),className:"w-full p-2.5 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 text-sm",step:"0.01",min:"0",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hauteur (m)"}),(0,d.jsx)("input",{type:"number",value:g,onChange:e=>f(e.target.value),className:"w-full p-2.5 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 text-sm",step:"0.01",min:"0",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Poids (kg)"}),(0,d.jsx)("input",{type:"number",value:j,onChange:e=>y(e.target.value),className:"w-full p-2.5 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 text-sm",step:"0.01",min:"0",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantit\xe9"}),(0,d.jsx)("input",{type:"number",value:N,onChange:e=>v(e.target.value),className:"w-full p-2.5 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 text-sm",step:"1",min:"1",required:!0})]}),(0,d.jsx)("div",{className:"col-span-1 sm:col-span-2 lg:col-span-3 flex justify-end",children:(0,d.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition duration-200 flex items-center text-sm",children:[(0,d.jsx)(a.wEH,{className:"mr-2"}),"Enregistrer"]})})]}),w&&(0,d.jsx)("div",{className:"mt-4 text-sm text-center ".concat(w.includes("Erreur")?"text-red-600":"text-green-600"),children:w})]}),S&&(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6 no-print",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Donn\xe9es enregistr\xe9es"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-semibold text-gray-700",children:"ID Article:"})," ",S.id_article]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-semibold text-gray-700",children:"Longueur:"})," ",S.longueur," m"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-semibold text-gray-700",children:"Largeur:"})," ",S.largeur," m"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-semibold text-gray-700",children:"Hauteur:"})," ",S.hauteur," m"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-semibold text-gray-700",children:"Poids:"})," ",S.poids," kg"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-semibold text-gray-700",children:"Quantit\xe9:"})," ",S.quantite]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-semibold text-gray-700",children:"Volume:"})," ",S.volume," m\xb3"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-semibold text-gray-700",children:"Volume/Quantit\xe9:"})," ",S.volume_quantite," m\xb3"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-semibold text-gray-700",children:"Poids Global:"})," ",S.poids_global," kg"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-semibold text-gray-700",children:"Type Rayon:"})," ",S.Type_Rayon]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-semibold text-gray-700",children:"Manutention:"})," ",S.manutention]})]})]}),(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,d.jsx)(a.$m5,{className:"mr-2 text-blue-600"}),"Explorer les Dimensions"]}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4",children:[(0,d.jsxs)("button",{onClick:()=>{if(0===t.length)return void k("Aucune donn\xe9e \xe0 exporter.");const e=l.P6.json_to_sheet(t),s=l.P6.book_new();l.P6.book_append_sheet(s,e,"Dimensions");const r=l.cW(s,{bookType:"xlsx",type:"array"}),a=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),n=URL.createObjectURL(a),o=document.createElement("a");o.href=n,o.download="dimensions_export_".concat((new Date).toISOString().split("T")[0],".xlsx"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n)},className:"px-4 py-2 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition duration-200 flex items-center text-sm",children:[(0,d.jsx)(a.u$v,{className:"mr-2"}),"Exporter en Excel"]}),(0,d.jsxs)("button",{onClick:()=>{const e=A.current;if(!e)return void console.error("Table reference is null. Ensure the table is rendered before printing.");const s=window.open("","","height=600,width=800");s?(s.document.write("<html><head><title>Imprimer Dimensions</title>"),s.document.write("<style>body { margin: 20px; font-family: Arial, sans-serif; } table { width: 100%; border-collapse: collapse; font-size: 14px; } th, td { border: 1px solid #ddd; padding: 8px; text-align: left; } th { background-color: #f2f2f2; font-weight: bold; } tr:nth-child(even) { background-color: #f9f9f9; } @media print { body { margin: 0; } }</style>"),s.document.write("</head><body>"),s.document.write(e.outerHTML),s.document.write("</body></html>"),s.document.close(),s.focus(),s.print(),s.close()):console.error("Failed to open print window. Check browser popup settings.")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition duration-200 flex items-center text-sm",children:[(0,d.jsx)(a.rcQ,{className:"mr-2"}),"Imprimer"]})]}),t.length>0?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden print-table",children:(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{ref:A,className:"min-w-full border-collapse",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{className:"text-gray-700 text-sm",children:[(0,d.jsx)("th",{className:"px-4 py-3 border-b font-semibold text-left",children:"ID Article"}),(0,d.jsx)("th",{className:"px-4 py-3 border-b font-semibold text-left",children:"Longueur (m)"}),(0,d.jsx)("th",{className:"px-4 py-3 border-b font-semibold text-left",children:"Largeur (m)"}),(0,d.jsx)("th",{className:"px-4 py-3 border-b font-semibold text-left",children:"Hauteur (m)"}),(0,d.jsx)("th",{className:"px-4 py-3 border-b font-semibold text-left",children:"Poids (kg)"}),(0,d.jsx)("th",{className:"px-4 py-3 border-b font-semibold text-left",children:"Quantit\xe9"}),(0,d.jsx)("th",{className:"px-4 py-3 border-b font-semibold text-left",children:"Volume (m\xb3)"}),(0,d.jsx)("th",{className:"px-4 py-3 border-b font-semibold text-left",children:"Volume/Quantit\xe9 (m\xb3)"}),(0,d.jsx)("th",{className:"px-4 py-3 border-b font-semibold text-left",children:"Type Rayon"}),(0,d.jsx)("th",{className:"px-4 py-3 border-b font-semibold text-left",children:"Manutention"}),(0,d.jsx)("th",{className:"px-4 py-3 border-b font-semibold text-left",children:"Poids Global (kg)"})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-gray-200",children:F.map((e=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50 transition duration-150",children:[(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.id_article}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.longueur}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.largeur}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.hauteur}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.poids}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.quantite}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.volume}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.volume_quantite}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.Type_Rayon}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.manutention}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.poids_global})]},e.id_article)))})]})})}),H>1&&(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 gap-4",children:[(0,d.jsxs)("button",{onClick:()=>I(q-1),disabled:1===q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-blue-700 transition duration-200 flex items-center text-sm sm:text-base",children:[(0,d.jsx)(a.bUI,{className:"mr-2"})," Pr\xe9c\xe9dent"]}),(0,d.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto",children:(()=>{const e=[];if(H<=5)for(let s=1;s<=H;s++)e.push(s);else{const s=Math.max(1,q-2),t=Math.min(H,s+5-1);s>1&&(e.push(1),s>2&&e.push("..."));for(let r=s;r<=t;r++)e.push(r);t<H&&(t<H-1&&e.push("..."),e.push(H))}return e})().map(((e,s)=>(0,d.jsx)("button",{onClick:()=>"number"===typeof e&&I(e),disabled:"..."===e||e===q,className:"px-3 py-1 rounded-md text-sm transition duration-200 ".concat(e===q?"bg-blue-600 text-white":"..."===e?"text-gray-400 cursor-default":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e},s)))}),(0,d.jsxs)("button",{onClick:()=>I(q+1),disabled:q===H,className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-blue-700 transition duration-200 flex items-center text-sm sm:text-base",children:["Suivant ",(0,d.jsx)(a.Dli,{className:"ml-2"})]})]}),t.length>0&&(0,d.jsxs)("div",{className:"mt-4 text-center text-sm text-gray-500",children:["Affichage ",M+1," \xe0 ",Math.min(R,t.length)," sur ",t.length.toLocaleString()," dimensions"]})]}):(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)(a.$m5,{className:"mx-auto text-gray-300 text-5xl mb-4"}),(0,d.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucune dimension enregistr\xe9e"}),(0,d.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Ajoutez des dimensions pour commencer"})]})]})]})}}}]);
//# sourceMappingURL=949.a405e41f.chunk.js.map