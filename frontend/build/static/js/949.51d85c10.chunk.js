"use strict";(self.webpackChunkadmin_dashboard_template_OptiStock=self.webpackChunkadmin_dashboard_template_OptiStock||[]).push([[949],{5176:(e,t,s)=>{s.d(t,{Z:()=>a});var r=s(184);const n=function(e){let{styleClass:t,children:s}=e;return(0,r.jsx)("div",{className:"text-xl font-semibold ".concat(t),children:s})};const a=function(e){let{title:t,children:s,topMargin:a,TopSideButtons:l}=e;return(0,r.jsxs)("div",{className:"card w-full p-6 bg-base-100 shadow-xl "+(a||"mt-6"),children:[(0,r.jsxs)(n,{styleClass:l?"inline-block":"",children:[t,l&&(0,r.jsx)("div",{className:"inline-block float-right",children:l})]}),(0,r.jsx)("div",{className:"divider mt-2"}),(0,r.jsx)("div",{className:"h-full w-full pb-6 bg-base-100",children:s})]})}},1949:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var r=s(2791),n=s(5176),a=s(4045),l=s(184);const o=()=>{const[e,t]=(0,r.useState)([]),[s,o]=(0,r.useState)([]),[i,d]=(0,r.useState)(""),[c,m]=(0,r.useState)(""),[u,x]=(0,r.useState)(""),[p,h]=(0,r.useState)(""),[b,g]=(0,r.useState)(""),[f,y]=(0,r.useState)(""),[j,N]=(0,r.useState)(""),[v,w]=(0,r.useState)(null),k="http://localhost:5000",_=(0,r.useRef)(null);(0,r.useEffect)((()=>{(async()=>{try{var e;const s=await fetch("".concat(k,"/dimensions/ids"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));const r=(null===(e=(await s.json()).ids)||void 0===e?void 0:e.map(String).sort(((e,t)=>e.localeCompare(t))))||[];t(r)}catch(s){console.error("Error fetching IDs:",s),N("Erreur lors du chargement des IDs: ".concat(s.message))}})()}),[k]),(0,r.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(k,"/dimensions/"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));const t=await e.json();o(t.data||[])}catch(e){console.error("Error fetching dimensions:",e),N("Erreur lors du chargement des dimensions: ".concat(e.message))}})()}),[k]);return(0,l.jsx)(n.Z,{title:"Gestion des Dimensions",children:(0,l.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-lg",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4 no-print",children:"Ajouter/Modifier Dimensions"}),(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!i||!c||!u||!p||!b||!f)return void N("Tous les champs sont requis.");const t=parseFloat(c),s=parseFloat(u),r=parseFloat(p),n=parseFloat(b),a=parseInt(f,10);if(isNaN(t)||isNaN(s)||isNaN(r)||isNaN(n)||isNaN(a)||a<1)N("Veuillez entrer des valeurs num\xe9riques valides (quantit\xe9 \u2265 1).");else try{const e=e=>Number(e),t={id_article:i,longueur:e(c),largeur:e(u),hauteur:e(p),poids:e(b),qte:e(f)},s=await fetch("".concat(k,"/dimensions/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await s.json();if(s.ok){N("Dimensions enregistr\xe9es avec succ\xe8s."),w(r.data[0]);const e=await fetch("".concat(k,"/dimensions/")),t=await e.json();o(t.data||[])}else N(r.message||"Erreur lors de l'enregistrement.")}catch(l){console.error("Error submitting dimensions:",l),N("Erreur serveur: "+l.message)}},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 no-print",children:[(0,l.jsxs)("div",{className:"col-span-1",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Article"}),(0,l.jsxs)("select",{value:i,onChange:e=>d(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,l.jsx)("option",{value:"",children:"S\xe9lectionner un ID"}),e.map((e=>(0,l.jsx)("option",{value:e,children:e},e)))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longueur (m)"}),(0,l.jsx)("input",{type:"number",value:c,onChange:e=>m(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",step:"0.01",min:"0",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Largeur (m)"}),(0,l.jsx)("input",{type:"number",value:u,onChange:e=>x(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",step:"0.01",min:"0",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hauteur (m)"}),(0,l.jsx)("input",{type:"number",value:p,onChange:e=>h(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",step:"0.01",min:"0",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Poids (kg)"}),(0,l.jsx)("input",{type:"number",value:b,onChange:e=>g(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",step:"0.01",min:"0",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantit\xe9"}),(0,l.jsx)("input",{type:"number",value:f,onChange:e=>y(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",step:"1",min:"1",required:!0})]}),(0,l.jsx)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3 flex justify-end mt-4",children:(0,l.jsx)("button",{type:"submit",className:"w-full md:w-auto px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Enregistrer"})})]}),j&&(0,l.jsx)("p",{className:"mt-4 text-sm text-center text-red-600 no-print",children:j}),v&&(0,l.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-md shadow-inner no-print",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Donn\xe9es enregistr\xe9es"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:"ID Article:"})," ",v.id_article]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Longueur:"})," ",v.longueur," m"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Largeur:"})," ",v.largeur," m"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Hauteur:"})," ",v.hauteur," m"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Poids:"})," ",v.poids," kg"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Quantit\xe9:"})," ",v.quantite]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Volume:"})," ",v.volume," m\xb3"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Volume/Quantit\xe9:"})," ",v.volume_quantite," m\xb3"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Poids Global:"})," ",v.poids_global," kg"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Type Rayon:"})," ",v.Type_Rayon]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Manutention:"})," ",v.manutention]})]})]}),(0,l.jsxs)("div",{className:"mt-8",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Explorer les Dimensions"}),(0,l.jsxs)("div",{className:"mb-4 flex space-x-4",children:[(0,l.jsx)("button",{onClick:()=>{if(0===s.length)return void N("Aucune donn\xe9e \xe0 exporter.");const e=a.P6.json_to_sheet(s),t=a.P6.book_new();a.P6.book_append_sheet(t,e,"Dimensions");const r=a.cW(t,{bookType:"xlsx",type:"array"}),n=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),l=URL.createObjectURL(n),o=document.createElement("a");o.href=l,o.download="dimensions_export_".concat((new Date).toISOString().split("T")[0],".xlsx"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(l)},className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors",children:"Exporter en Excel"}),(0,l.jsx)("button",{onClick:()=>{const e=_.current;if(!e)return void console.error("Table reference is null. Ensure the table is rendered before printing.");const t=window.open("","","height=600,width=800");t?(t.document.write("<html><head><title>Print</title>"),t.document.write("<style>body { margin: 0; } table { width: 100%; border-collapse: collapse; } th, td { border: 1px solid #ddd; padding: 8px; text-align: left; } th { background-color: #f2f2f2; }</style>"),t.document.write("</head><body>"),t.document.write(e.outerHTML),t.document.write("</body></html>"),t.document.close(),t.focus(),t.print(),t.close()):console.error("Failed to open print window. Check browser popup settings.")},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Imprimer"})]}),s.length>0?(0,l.jsx)("div",{className:"overflow-x-auto print-table",children:(0,l.jsxs)("table",{ref:_,className:"min-w-full bg-white border border-gray-300",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-gray-100",children:[(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left text-sm font-medium text-gray-700",children:"ID Article"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left text-sm font-medium text-gray-700",children:"Longueur (m)"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left text-sm font-medium text-gray-700",children:"Largeur (m)"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left text-sm font-medium text-gray-700",children:"Hauteur (m)"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left text-sm font-medium text-gray-700",children:"Poids (kg)"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left text-sm font-medium text-gray-700",children:"Quantit\xe9"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left text-sm font-medium text-gray-700",children:"Volume (m\xb3)"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left text-sm font-medium text-gray-700",children:"Volume/Quantit\xe9 (m\xb3)"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left text-sm font-medium text-gray-700",children:"Type Rayon"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left text-sm font-medium text-gray-700",children:"Manutention"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b text-left text-sm font-medium text-gray-700",children:"Poids Global (kg)"})]})}),(0,l.jsx)("tbody",{children:s.map((e=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"py-2 px-4 border-b text-sm text-gray-900",children:e.id_article}),(0,l.jsx)("td",{className:"py-2 px-4 border-b text-sm text-gray-900",children:e.longueur}),(0,l.jsx)("td",{className:"py-2 px-4 border-b text-sm text-gray-900",children:e.largeur}),(0,l.jsx)("td",{className:"py-2 px-4 border-b text-sm text-gray-900",children:e.hauteur}),(0,l.jsx)("td",{className:"py-2 px-4 border-b text-sm text-gray-900",children:e.poids}),(0,l.jsx)("td",{className:"py-2 px-4 border-b text-sm text-gray-900",children:e.quantite}),(0,l.jsx)("td",{className:"py-2 px-4 border-b text-sm text-gray-900",children:e.volume}),(0,l.jsx)("td",{className:"py-2 px-4 border-b text-sm text-gray-900",children:e.volume_quantite}),(0,l.jsx)("td",{className:"py-2 px-4 border-b text-sm text-gray-900",children:e.Type_Rayon}),(0,l.jsx)("td",{className:"py-2 px-4 border-b text-sm text-gray-900",children:e.manutention}),(0,l.jsx)("td",{className:"py-2 px-4 border-b text-sm text-gray-900",children:e.poids_global})]},e.id_article)))})]})}):(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Aucune dimension enregistr\xe9e."})]})]})})}}}]);
//# sourceMappingURL=949.51d85c10.chunk.js.map