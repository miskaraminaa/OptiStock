(self.webpackChunkadmin_dashboard_template_OptiStock=self.webpackChunkadmin_dashboard_template_OptiStock||[]).push([[826],{4826:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(2791),r=a(9434),n=a(3071),l=a(6564),i=a(5054),c=a(8573),o=a.n(c),d=a(184);const m=e=>e.map((e=>({article_code:e.article_code||"N/A",description:e.description||"N/A",emplacement_cedant:e.emplacement_cedant||"N/A",emplacement_prenant:e.emplacement_prenant||"N/A",final_location:e.final_location||"N/A",suitable_location:e.suitable_location||"N/A",Storage_Location:e.Storage_Location||"N/A","Storage_location_Valid\xe9":e.Storage_location_Valid\u00e9||"N/A",BIN_SAP:e.BIN_SAP||"N/A",quantity_ewm:null!=e.quantity_ewm?Number(e.quantity_ewm).toFixed(3):"N/A",quantity_controlled:null!=e.quantity_controlled?Number(e.quantity_controlled).toFixed(3):"N/A",quantity_iam:null!=e.quantity_iam?Number(e.quantity_iam).toFixed(3):"N/A",unit:e.unit||"N/A",LE:e.LE||"N/A",LS:e.LS||"N/A"}))),u=()=>{const e=(0,r.I0)(),[t,a]=(0,s.useState)([]),[c,u]=(0,s.useState)(1),[x,p]=(0,s.useState)(1),[y,h]=(0,s.useState)(0),[g,b]=(0,s.useState)(""),[f,N]=(0,s.useState)(!1),[j,v]=(0,s.useState)(null),[w,_]=(0,s.useState)({key:null,direction:null}),k=25,S="http://localhost:5000";(0,s.useEffect)((()=>{e((0,i.Iw)({title:"Guide de Rangement LE"}))}),[e]);const A=(0,s.useCallback)((async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=3,n=12e4;N(!0),v(null);try{const s=new AbortController,r=setTimeout((()=>s.abort()),n),l=await fetch("".concat(S,"/rangement-le?page=").concat(e,"&limit=").concat(k).concat(t?"&search=".concat(encodeURIComponent(t)):""),{signal:s.signal,headers:{"Content-Type":"application/json"}});if(clearTimeout(r),!l.ok)throw new Error("HTTP ".concat(l.status,": ").concat(l.statusText));const i=await l.json();if(!i.data||!Array.isArray(i.data))throw new Error("Invalid data format");a(m(i.data)),h(i.totalRecords||i.data.length),p(i.totalPages||Math.ceil(i.totalRecords/k))}catch(l){if("AbortError"===l.name&&s<r)return void setTimeout((()=>A(e,t,s+1)),1e3*(s+1));v("Erreur lors du chargement des donn\xe9es: ".concat(l.message))}finally{N(!1)}}),[k,S]),E=(0,s.useMemo)((()=>o()(A,300)),[A]);(0,s.useEffect)((()=>(E(c,g),()=>E.cancel())),[c,g,E]);const L=(0,s.useCallback)((e=>{b(e.target.value.trim()),u(1)}),[]),C=(0,s.useMemo)((()=>w.key?[...t].sort(((e,t)=>{const a="N/A"===e[w.key]?"":e[w.key],s="N/A"===t[w.key]?"":t[w.key];return a<s?"asc"===w.direction?-1:1:a>s?"asc"===w.direction?1:-1:0})):[...t]),[t,w]);return(0,d.jsxs)("div",{className:"mx-auto max-w-7xl p-4 sm:p-6",children:[(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-2 flex items-center",children:[(0,d.jsx)(n.$m5,{className:"mr-3 text-blue-600"}),"Guide de Rangement LE"]}),(0,d.jsx)("p",{className:"text-gray-600 text-sm sm:text-base",children:"Suivi des emplacements historiques et recommandations de rangement"})]}),(0,d.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[(0,d.jsxs)("div",{className:"relative w-full sm:flex-1 max-w-md",children:[(0,d.jsx)(n.U41,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"}),(0,d.jsx)("input",{type:"text",onChange:L,placeholder:"Rechercher par code article ou d\xe9signation",value:g,className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 text-sm","aria-label":"Rechercher par code article ou d\xe9signation"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,d.jsxs)("span",{className:"flex items-center",children:[(0,d.jsx)(n.nO,{className:"mr-1"}),y.toLocaleString()," articles"]}),(0,d.jsxs)("span",{className:"text-gray-400",children:["Page ",c," / ",x]}),(0,d.jsxs)("button",{onClick:async()=>{try{if(!(await fetch("".concat(S,"/rangement-le/reset-cache"),{method:"POST"})).ok)throw new Error("Failed to reset cache");a([]),u(1),v(null),A(c,g)}catch(e){v("Erreur lors de la r\xe9initialisation du cache")}},className:"px-4 py-2 bg-gray-600 text-white rounded-lg shadow hover:bg-gray-700 transition duration-200 flex items-center text-sm","aria-label":"R\xe9initialiser le cache",children:[(0,d.jsx)(n.WLu,{className:"mr-2"})," R\xe9initialiser Cache"]})]})]}),f&&(0,d.jsxs)("div",{className:"flex flex-col justify-center items-center my-8",children:[(0,d.jsx)(l.Z,{color:"#3b82f6",size:40}),(0,d.jsx)("p",{className:"mt-4 text-gray-600",children:"Chargement des donn\xe9es..."}),(0,d.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Page ",c," sur ",x," - ",k," articles par page"]})]}),j&&(0,d.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"text-red-600 mr-3",children:"\u26a0\ufe0f"}),(0,d.jsx)("span",{className:"text-red-800 text-sm sm:text-base",children:j})]}),(0,d.jsxs)("button",{onClick:()=>{a([]),u(1),v(null),A(c,g)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition duration-200 flex items-center text-sm","aria-label":"R\xe9essayer le chargement des donn\xe9es",children:[(0,d.jsx)(n.WLu,{className:"mr-2"})," R\xe9essayer"]})]})}),!f&&!j&&0===C.length&&(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)(n.nO,{className:"mx-auto text-gray-300 text-5xl mb-4"}),(0,d.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucune donn\xe9e disponible"}),(0,d.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"V\xe9rifiez la configuration des donn\xe9es ou essayez une autre recherche"})]}),!f&&!j&&C.length>0&&(0,d.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full border-collapse",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsx)("tr",{className:"text-gray-700 text-sm",children:[{key:"article_code",label:"Code Article"},{key:"description",label:"D\xe9signation"},{key:"emplacement_cedant",label:"Emplacement C\xe9dant"},{key:"emplacement_prenant",label:"Emplacement Prenant"},{key:"final_location",label:"Emplacement Final"},{key:"suitable_location",label:"Emplacement Convenable"},{key:"Storage_Location",label:"Storage Location"},{key:"Storage_location_Valid\xe9",label:"Storage Location Valid\xe9"},{key:"BIN_SAP",label:"BIN SAP"},{key:"quantity_ewm",label:"Quantit\xe9 EWM"},{key:"quantity_controlled",label:"Quantit\xe9 Contr\xf4l\xe9e"},{key:"quantity_iam",label:"Quantit\xe9 IAM"},{key:"unit",label:"Unit\xe9"},{key:"LE",label:"LE"},{key:"LS",label:"LS"}].map((e=>{let{key:t,label:a}=e;return(0,d.jsxs)("th",{className:"px-4 py-3 border-b font-semibold text-left cursor-pointer",onClick:()=>(e=>{let t="asc";w.key===e&&"asc"===w.direction&&(t="desc"),_({key:e,direction:t})})(t),role:"button","aria-sort":w.key===t?w.direction:"none",scope:"col",children:[a," ",w.key===t&&("asc"===w.direction?"\u2191":"\u2193")]},t)}))})}),(0,d.jsx)("tbody",{className:"divide-y divide-gray-200",children:C.map(((e,t)=>{const a=(s=e.final_location,r=e.suitable_location,"N/A"===s&&"N/A"===r?{status:"unknown",color:"bg-gray-100 text-gray-600"}:"N/A"!==s&&"N/A"!==r&&s===r?{status:"correct",color:"bg-green-100 text-green-600"}:"N/A"!==s&&"N/A"!==r&&s!==r?{status:"incorrect",color:"bg-red-100 text-red-600"}:{status:"pending",color:"bg-yellow-100 text-yellow-600"});var s,r;return(0,d.jsxs)("tr",{className:"hover:bg-gray-50 transition duration-150",children:[(0,d.jsx)("td",{className:"px-4 py-3 text-gray-900 font-medium text-sm",children:e.article_code}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm max-w-[16rem]",children:(0,d.jsx)("div",{className:"truncate",title:e.description,children:e.description})}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm max-w-[16rem] whitespace-pre-wrap",children:e.emplacement_cedant}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm max-w-[16rem] whitespace-pre-wrap",children:e.emplacement_prenant}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(n.Nh4,{className:"mr-1 text-blue-500"}),e.final_location]})}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat(a.color.split(" ")[0])}),e.suitable_location]})}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm whitespace-pre-wrap",children:e.Storage_Location}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.Storage_location_Valid\u00e9}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.BIN_SAP}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm font-medium",children:e.quantity_ewm}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm font-medium",children:e.quantity_controlled}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm font-medium",children:e.quantity_iam}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.unit}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.LE}),(0,d.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.LS})]},"".concat(e.article_code,"-").concat(t))}))})]})})}),x>1&&(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 gap-4",children:[(0,d.jsxs)("button",{onClick:()=>u(c-1),disabled:1===c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-blue-700 transition duration-200 flex items-center text-sm sm:text-base","aria-label":"Page pr\xe9c\xe9dente",children:[(0,d.jsx)(n.bUI,{className:"mr-2"})," Pr\xe9c\xe9dent"]}),(0,d.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto",children:(()=>{const e=[];if(x<=5)for(let t=1;t<=x;t++)e.push(t);else{const t=Math.max(1,c-2),a=Math.min(x,t+5-1);t>1&&(e.push(1),t>2&&e.push("..."));for(let s=t;s<=a;s++)e.push(s);a<x&&(a<x-1&&e.push("..."),e.push(x))}return e})().map(((e,t)=>(0,d.jsx)("button",{onClick:()=>"number"===typeof e&&u(e),disabled:"..."===e||e===c,className:"px-3 py-1 rounded-md text-sm transition duration-200 ".concat(e===c?"bg-blue-600 text-white":"..."===e?"text-gray-400 cursor-default":"bg-gray-200 text-gray-700 hover:bg-gray-300"),"aria-label":"..."===e?"Ellipsis":"Page ".concat(e),"aria-current":e===c?"page":void 0,children:e},t)))}),(0,d.jsxs)("button",{onClick:()=>u(c+1),disabled:c===x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-blue-700 transition duration-200 flex items-center text-sm sm:text-base","aria-label":"Page suivante",children:["Suivant ",(0,d.jsx)(n.Dli,{className:"ml-2"})]})]}),!f&&C.length>0&&(0,d.jsxs)("div",{className:"mt-4 text-center text-sm text-gray-500",children:["Affichage ",(c-1)*k+1," \xe0 ",Math.min(c*k,y)," sur ",y.toLocaleString()," articles"]})]})}},7197:(e,t,a)=>{var s=a(7009).Symbol;e.exports=s},9066:(e,t,a)=>{var s=a(7197),r=a(1587),n=a(3581),l=s?s.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":l&&l in Object(e)?r(e):n(e)}},821:(e,t,a)=>{var s=a(6050),r=/^\s+/;e.exports=function(e){return e?e.slice(0,s(e)+1).replace(r,""):e}},1032:(e,t,a)=>{var s="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g;e.exports=s},1587:(e,t,a)=>{var s=a(7197),r=Object.prototype,n=r.hasOwnProperty,l=r.toString,i=s?s.toStringTag:void 0;e.exports=function(e){var t=n.call(e,i),a=e[i];try{e[i]=void 0;var s=!0}catch(c){}var r=l.call(e);return s&&(t?e[i]=a:delete e[i]),r}},3581:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},7009:(e,t,a)=>{var s=a(1032),r="object"==typeof self&&self&&self.Object===Object&&self,n=s||r||Function("return this")();e.exports=n},6050:e=>{var t=/\s/;e.exports=function(e){for(var a=e.length;a--&&t.test(e.charAt(a)););return a}},8573:(e,t,a)=>{var s=a(8092),r=a(72),n=a(2582),l=Math.max,i=Math.min;e.exports=function(e,t,a){var c,o,d,m,u,x,p=0,y=!1,h=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var a=c,s=o;return c=o=void 0,p=t,m=e.apply(s,a)}function f(e){return p=e,u=setTimeout(j,t),y?b(e):m}function N(e){var a=e-x;return void 0===x||a>=t||a<0||h&&e-p>=d}function j(){var e=r();if(N(e))return v(e);u=setTimeout(j,function(e){var a=t-(e-x);return h?i(a,d-(e-p)):a}(e))}function v(e){return u=void 0,g&&c?b(e):(c=o=void 0,m)}function w(){var e=r(),a=N(e);if(c=arguments,o=this,x=e,a){if(void 0===u)return f(x);if(h)return clearTimeout(u),u=setTimeout(j,t),b(x)}return void 0===u&&(u=setTimeout(j,t)),m}return t=n(t)||0,s(a)&&(y=!!a.leading,d=(h="maxWait"in a)?l(n(a.maxWait)||0,t):d,g="trailing"in a?!!a.trailing:g),w.cancel=function(){void 0!==u&&clearTimeout(u),p=0,c=x=o=u=void 0},w.flush=function(){return void 0===u?m:v(r())},w}},8092:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3141:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},152:(e,t,a)=>{var s=a(9066),r=a(3141);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==s(e)}},72:(e,t,a)=>{var s=a(7009);e.exports=function(){return s.Date.now()}},2582:(e,t,a)=>{var s=a(821),r=a(8092),n=a(152),l=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,o=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(n(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=s(e);var a=i.test(e);return a||c.test(e)?o(e.slice(2),a?2:8):l.test(e)?NaN:+e}}}]);
//# sourceMappingURL=826.7c6ee648.chunk.js.map