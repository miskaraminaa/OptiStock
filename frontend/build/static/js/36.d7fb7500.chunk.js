(self.webpackChunkadmin_dashboard_template_OptiStock=self.webpackChunkadmin_dashboard_template_OptiStock||[]).push([[36],{6036:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(2791),r=a(9434),i=a(1989),l=a(8573),n=a.n(l),o=a(3071),c=a(6564),d=a(5054),x=a(184);const m=()=>{const e=(0,r.I0)(),[t,a]=(0,s.useState)([]),[l,m]=(0,s.useState)(""),[u,p]=(0,s.useState)(1),[y,g]=(0,s.useState)(1),[h,N]=(0,s.useState)(0),[b,_]=(0,s.useState)(!0),[f,v]=(0,s.useState)(null),[j,k]=(0,s.useState)({key:null,direction:null});(0,s.useEffect)((()=>{e((0,d.Iw)({title:"Guide de Rangement"}))}),[e]);const A=async(e,t)=>{try{_(!0),v(null);const s=await i.Z.get("".concat("http://localhost:5000","/rangement"),{params:{page:e,limit:25,search:t||void 0}}),r=Array.isArray(s.data.data)?s.data.data:[];a((e=>e.map((e=>({article_code:e.article_code||"N/A",description:e.description||"N/A",numero_magasin:e.numero_magasin||"N/A",division:e.division||"N/A",warehouse:e.warehouse||"N/A",bin_location:e.bin_location||"N/A",type_magasin:e.type_magasin||"N/A",quantity:null!=e.quantity?Number(e.quantity):"N/A",unit:e.unit||"N/A",type_stock:e.type_stock||"N/A",designation_type_stock:e.designation_type_stock||"N/A",groupe_valorisation:e.groupe_valorisation||"N/A",pmp:null!=e.pmp?Number(e.pmp):"N/A",valeur_stock:null!=e.valeur_stock?Number(e.valeur_stock):"N/A",devise:e.devise||"N/A",date_em:e.date_em||"N/A",derniere_sortie:e.derniere_sortie||"N/A",Marque:e.Marque||"N/A",Oracle_item_code:e.Oracle_item_code||"N/A",migration_description:e.migration_description||"N/A","Qt\xe9_valid\xe9e_SAP":null!=e.Qt\u00e9_valid\u00e9e_SAP?Number(e.Qt\u00e9_valid\u00e9e_SAP):"N/A",SAP_Material:e.SAP_Material||"N/A",PLANT:e.PLANT||"N/A","Plant_Valid\xe9":e.Plant_Valid\u00e9||"N/A",Storage_Location:e.Storage_Location||"N/A","Storage_location_Valid\xe9":e.Storage_location_Valid\u00e9||"N/A",local:e.local||"N/A",BIN_SAP:e.BIN_SAP||"N/A",bins_with_qte_nx:e.bins_with_qte_nx||"N/A"}))))(r)),N(s.data.totalRecords||r.length),g(s.data.totalPages||Math.ceil(s.data.totalRecords/25))}catch(s){v("Erreur lors du chargement des donn\xe9es : ".concat(s.message))}finally{_(!1)}},S=(0,s.useMemo)((()=>n()(A,300)),[]);(0,s.useEffect)((()=>(S(u,l),()=>S.cancel())),[u,l,S]);const w=(0,s.useMemo)((()=>j.key?[...t].sort(((e,t)=>{const a="N/A"===e[j.key]?"":e[j.key],s="N/A"===t[j.key]?"":t[j.key];return a<s?"asc"===j.direction?-1:1:a>s?"asc"===j.direction?1:-1:0})):[...t]),[t,j]);return(0,x.jsxs)("div",{className:"mx-auto max-w-7xl p-4 sm:p-6",children:[(0,x.jsxs)("div",{className:"mb-6",children:[(0,x.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-2 flex items-center",children:[(0,x.jsx)(o.$m5,{className:"mr-3 text-blue-600"}),"Guide de Rangement"]}),(0,x.jsx)("p",{className:"text-gray-600 text-sm sm:text-base",children:"Gestion des emplacements et suivi des stocks"})]}),(0,x.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[(0,x.jsxs)("div",{className:"relative w-full sm:flex-1 max-w-md",children:[(0,x.jsx)(o.U41,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"}),(0,x.jsx)("input",{type:"text",placeholder:"Rechercher par code article, d\xe9signation ou marque",value:l,onChange:e=>{m(e.target.value.trim()),p(1)},className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 text-sm","aria-label":"Rechercher par code article, d\xe9signation ou marque"})]}),(0,x.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,x.jsxs)("span",{className:"flex items-center",children:[(0,x.jsx)(o.nO,{className:"mr-1"}),h.toLocaleString()," articles"]}),(0,x.jsxs)("span",{className:"text-gray-400",children:["Page ",u," / ",y]})]})]}),b&&(0,x.jsxs)("div",{className:"flex flex-col justify-center items-center my-8",children:[(0,x.jsx)(c.Z,{color:"#3b82f6",size:40}),(0,x.jsx)("p",{className:"mt-4 text-gray-600",children:"Chargement des donn\xe9es..."}),(0,x.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Page ",u," sur ",y," - ",25," articles par page"]})]}),f&&(0,x.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("div",{className:"text-red-600 mr-3",children:"\u26a0\ufe0f"}),(0,x.jsx)("span",{className:"text-red-800 text-sm sm:text-base",children:f})]}),(0,x.jsxs)("button",{onClick:()=>{v(null),p(1),A(u,l)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition duration-200 flex items-center text-sm","aria-label":"R\xe9essayer le chargement des donn\xe9es",children:[(0,x.jsx)(o.WLu,{className:"mr-2"})," R\xe9essayer"]})]})}),!b&&!f&&0===w.length&&(0,x.jsxs)("div",{className:"text-center py-12",children:[(0,x.jsx)(o.nO,{className:"mx-auto text-gray-300 text-5xl mb-4"}),(0,x.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucune donn\xe9e disponible"}),(0,x.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"V\xe9rifiez la configuration des donn\xe9es ou essayez une autre recherche"})]}),!b&&!f&&w.length>0&&(0,x.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:(0,x.jsx)("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"min-w-full border-collapse",children:[(0,x.jsx)("thead",{className:"bg-gray-50",children:(0,x.jsx)("tr",{className:"text-gray-700 text-sm",children:[{key:"article_code",label:"Code Article"},{key:"description",label:"D\xe9signation"},{key:"numero_magasin",label:"Num\xe9ro Magasin"},{key:"division",label:"Division"},{key:"warehouse",label:"Magasin"},{key:"bin_location",label:"Emplacement"},{key:"type_magasin",label:"Type Magasin"},{key:"quantity",label:"Quantit\xe9"},{key:"unit",label:"Unit\xe9"},{key:"type_stock",label:"Type Stock"},{key:"designation_type_stock",label:"D\xe9signation Type Stock"},{key:"groupe_valorisation",label:"Groupe Valorisation"},{key:"pmp",label:"PMP"},{key:"valeur_stock",label:"Valeur Stock"},{key:"devise",label:"Devise"},{key:"date_em",label:"Date EM"},{key:"derniere_sortie",label:"Derni\xe8re Sortie"},{key:"Marque",label:"Marque"},{key:"Oracle_item_code",label:"Oracle Item Code"},{key:"migration_description",label:"Description Migration"},{key:"Qt\xe9_valid\xe9e_SAP",label:"Qt\xe9 Valid\xe9e SAP"},{key:"SAP_Material",label:"SAP Material"},{key:"PLANT",label:"Plant"},{key:"Plant_Valid\xe9",label:"Plant Valid\xe9"},{key:"Storage_Location",label:"Storage Location"},{key:"Storage_location_Valid\xe9",label:"Storage Location Valid\xe9"},{key:"local",label:"Local"},{key:"BIN_SAP",label:"BIN SAP"},{key:"bins_with_qte_nx",label:"Bins with QTE NX"}].map((e=>{let{key:t,label:a}=e;return(0,x.jsxs)("th",{className:"px-4 py-3 border-b font-semibold text-left cursor-pointer",onClick:()=>(e=>{let t="asc";j.key===e&&"asc"===j.direction&&(t="desc"),k({key:e,direction:t})})(t),role:"button","aria-sort":j.key===t?j.direction:"none",scope:"col",children:[a," ",j.key===t&&("asc"===j.direction?"\u2191":"\u2193")]},t)}))})}),(0,x.jsx)("tbody",{className:"divide-y divide-gray-200",children:w.map(((e,t)=>(0,x.jsxs)("tr",{className:"hover:bg-gray-50 transition duration-150",children:[(0,x.jsx)("td",{className:"px-4 py-3 text-gray-900 font-medium text-sm",children:e.article_code}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm max-w-[16rem]",children:(0,x.jsx)("div",{className:"truncate",title:e.description,children:e.description})}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.numero_magasin}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.division}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.warehouse}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.bin_location}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.type_magasin}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm font-medium",children:"N/A"!==e.quantity?(0,x.jsxs)(x.Fragment,{children:[e.quantity.toFixed(3),e.quantity<0&&(0,x.jsx)("span",{className:"text-red-500",children:" (Sortie)"})]}):"N/A"}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.unit}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.type_stock}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm max-w-[12rem]",children:(0,x.jsx)("div",{className:"truncate",title:e.designation_type_stock,children:e.designation_type_stock})}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.groupe_valorisation}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:"N/A"===e.pmp?"N/A":e.pmp.toFixed(2)}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:"N/A"===e.valeur_stock?"N/A":e.valeur_stock.toFixed(2)}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.devise}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.date_em}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.derniere_sortie}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.Marque}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.Oracle_item_code}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm max-w-[16rem]",children:(0,x.jsx)("div",{className:"truncate",title:e.migration_description,children:e.migration_description})}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:"N/A"===e.Qt\u00e9_valid\u00e9e_SAP?"N/A":e.Qt\u00e9_valid\u00e9e_SAP.toFixed(3)}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.SAP_Material}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.PLANT}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.Plant_Valid\u00e9}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.Storage_Location}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm max-w-[12rem]",children:(0,x.jsx)("div",{className:"truncate",title:e.Storage_location_Valid\u00e9,children:e.Storage_location_Valid\u00e9})}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.local}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm",children:e.BIN_SAP}),(0,x.jsx)("td",{className:"px-4 py-3 text-gray-800 text-sm max-w-[16rem] whitespace-pre-wrap",children:e.bins_with_qte_nx})]},"".concat(e.article_code,"-").concat(t))))})]})})}),y>1&&(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 gap-4",children:[(0,x.jsxs)("button",{onClick:()=>p(u-1),disabled:1===u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-blue-700 transition duration-200 flex items-center text-sm sm:text-base","aria-label":"Page pr\xe9c\xe9dente",children:[(0,x.jsx)(o.bUI,{className:"mr-2"})," Pr\xe9c\xe9dent"]}),(0,x.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto",children:(()=>{const e=[];if(y<=5)for(let t=1;t<=y;t++)e.push(t);else{const t=Math.max(1,u-2),a=Math.min(y,t+5-1);t>1&&(e.push(1),t>2&&e.push("..."));for(let s=t;s<=a;s++)e.push(s);a<y&&(a<y-1&&e.push("..."),e.push(y))}return e})().map(((e,t)=>(0,x.jsx)("button",{onClick:()=>"number"===typeof e&&p(e),disabled:"..."===e||e===u,className:"px-3 py-1 rounded-md text-sm transition duration-200 ".concat(e===u?"bg-blue-600 text-white":"..."===e?"text-gray-400 cursor-default":"bg-gray-200 text-gray-700 hover:bg-gray-300"),"aria-label":"..."===e?"Ellipsis":"Page ".concat(e),"aria-current":e===u?"page":void 0,children:e},t)))}),(0,x.jsxs)("button",{onClick:()=>p(u+1),disabled:u===y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-blue-700 transition duration-200 flex items-center text-sm sm:text-base","aria-label":"Page suivante",children:["Suivant ",(0,x.jsx)(o.Dli,{className:"ml-2"})]})]}),!b&&w.length>0&&(0,x.jsxs)("div",{className:"mt-4 text-center text-sm text-gray-500",children:["Affichage ",25*(u-1)+1," \xe0 ",Math.min(25*u,h)," sur ",h.toLocaleString()," articles"]})]})}},7197:(e,t,a)=>{var s=a(7009).Symbol;e.exports=s},9066:(e,t,a)=>{var s=a(7197),r=a(1587),i=a(3581),l=s?s.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":l&&l in Object(e)?r(e):i(e)}},821:(e,t,a)=>{var s=a(6050),r=/^\s+/;e.exports=function(e){return e?e.slice(0,s(e)+1).replace(r,""):e}},1032:(e,t,a)=>{var s="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g;e.exports=s},1587:(e,t,a)=>{var s=a(7197),r=Object.prototype,i=r.hasOwnProperty,l=r.toString,n=s?s.toStringTag:void 0;e.exports=function(e){var t=i.call(e,n),a=e[n];try{e[n]=void 0;var s=!0}catch(o){}var r=l.call(e);return s&&(t?e[n]=a:delete e[n]),r}},3581:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},7009:(e,t,a)=>{var s=a(1032),r="object"==typeof self&&self&&self.Object===Object&&self,i=s||r||Function("return this")();e.exports=i},6050:e=>{var t=/\s/;e.exports=function(e){for(var a=e.length;a--&&t.test(e.charAt(a)););return a}},8573:(e,t,a)=>{var s=a(8092),r=a(72),i=a(2582),l=Math.max,n=Math.min;e.exports=function(e,t,a){var o,c,d,x,m,u,p=0,y=!1,g=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function N(t){var a=o,s=c;return o=c=void 0,p=t,x=e.apply(s,a)}function b(e){return p=e,m=setTimeout(f,t),y?N(e):x}function _(e){var a=e-u;return void 0===u||a>=t||a<0||g&&e-p>=d}function f(){var e=r();if(_(e))return v(e);m=setTimeout(f,function(e){var a=t-(e-u);return g?n(a,d-(e-p)):a}(e))}function v(e){return m=void 0,h&&o?N(e):(o=c=void 0,x)}function j(){var e=r(),a=_(e);if(o=arguments,c=this,u=e,a){if(void 0===m)return b(u);if(g)return clearTimeout(m),m=setTimeout(f,t),N(u)}return void 0===m&&(m=setTimeout(f,t)),x}return t=i(t)||0,s(a)&&(y=!!a.leading,d=(g="maxWait"in a)?l(i(a.maxWait)||0,t):d,h="trailing"in a?!!a.trailing:h),j.cancel=function(){void 0!==m&&clearTimeout(m),p=0,o=u=c=m=void 0},j.flush=function(){return void 0===m?x:v(r())},j}},8092:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3141:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},152:(e,t,a)=>{var s=a(9066),r=a(3141);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==s(e)}},72:(e,t,a)=>{var s=a(7009);e.exports=function(){return s.Date.now()}},2582:(e,t,a)=>{var s=a(821),r=a(8092),i=a(152),l=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,o=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=s(e);var a=n.test(e);return a||o.test(e)?c(e.slice(2),a?2:8):l.test(e)?NaN:+e}}}]);
//# sourceMappingURL=36.d7fb7500.chunk.js.map