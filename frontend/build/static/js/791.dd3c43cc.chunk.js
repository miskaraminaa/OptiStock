(self.webpackChunkadmin_dashboard_template_OptiStock=self.webpackChunkadmin_dashboard_template_OptiStock||[]).push([[791],{5524:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(2791),n=a(184);const l=function(e){let{labelTitle:t,labelStyle:a,type:l,containerStyle:r,defaultValue:o,placeholder:i,updateFormValue:c,updateType:d}=e;const[m,x]=(0,s.useState)(o);return(0,n.jsxs)("div",{className:"form-control w-full ".concat(r),children:[(0,n.jsx)("label",{className:"label",children:(0,n.jsx)("span",{className:"label-text text-base-content "+a,children:t})}),(0,n.jsx)("input",{type:l||"text",value:m,placeholder:i||"",onChange:e=>{return t=e.target.value,x(t),void c({updateType:d,value:t});var t},className:"input  input-bordered w-full "})]})}},9697:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(184);const n=function(e){let{styleClass:t,children:a}=e;return(0,s.jsx)("p",{className:"text-center  text-error ".concat(t),children:a})}},3481:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>be});var s=a(9255),n=a(2791),l=a(9434),r=a(6337),o=a(4880),i=a(8303),c=a(6084),d=a(9313),m=a(184);const x=function(){(0,l.I0)();const{noOfNotifications:e,pageTitle:t}=(0,l.v9)((e=>e.header)),[a,c]=(0,n.useState)(localStorage.getItem("theme"));return(0,n.useEffect)((()=>{(0,s.themeChange)(!1),null===a&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?c("dark"):c("light"))}),[]),(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"navbar sticky top-0 bg-base-100  z-10 shadow-md ",children:[(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)("label",{htmlFor:"left-sidebar-drawer",className:"btn btn-primary drawer-button lg:hidden",children:(0,m.jsx)(r.Z,{className:"h-5 inline-block w-5"})}),(0,m.jsx)("h1",{className:"text-2xl font-semibold ml-2",children:t})]}),(0,m.jsxs)("div",{className:"flex-none ",children:[(0,m.jsxs)("label",{className:"swap ",children:[(0,m.jsx)("input",{type:"checkbox"}),(0,m.jsx)(i.Z,{"data-set-theme":"light","data-act-class":"ACTIVECLASS",className:"fill-current w-6 h-6 "+("dark"===a?"swap-on":"swap-off")}),(0,m.jsx)(o.Z,{"data-set-theme":"dark","data-act-class":"ACTIVECLASS",className:"fill-current w-6 h-6 "+("light"===a?"swap-on":"swap-off")})]}),(0,m.jsxs)("div",{className:"dropdown dropdown-end ml-4",children:[(0,m.jsx)("label",{tabIndex:0,className:"btn btn-ghost btn-circle avatar",children:(0,m.jsx)("div",{className:"w-10 rounded-full",children:(0,m.jsx)("img",{src:"/ocp.png",alt:"profile"})})}),(0,m.jsxs)("ul",{tabIndex:0,className:"menu menu-compact dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52",children:[(0,m.jsx)("div",{className:"divider mt-0 mb-0"}),(0,m.jsx)("li",{children:(0,m.jsx)("a",{onClick:function(){localStorage.clear(),window.location.href="/"},children:"Logout"})})]})]})]})]})})};var u=a(7689),p=a(8593),h=a(9076);const g=(0,n.lazy)((()=>Promise.all([a.e(45),a.e(848),a.e(496)]).then(a.bind(a,9496)))),b=(0,n.lazy)((()=>Promise.all([a.e(640),a.e(678)]).then(a.bind(a,4678)))),N=(0,n.lazy)((()=>Promise.all([a.e(482),a.e(380)]).then(a.bind(a,9380)))),j=(0,n.lazy)((()=>Promise.all([a.e(45),a.e(352),a.e(77)]).then(a.bind(a,3077)))),y=(0,n.lazy)((()=>Promise.all([a.e(45),a.e(949)]).then(a.bind(a,1949)))),f=(0,n.lazy)((()=>Promise.all([a.e(45),a.e(352),a.e(553)]).then(a.bind(a,7553)))),v=(0,n.lazy)((()=>a.e(36).then(a.bind(a,6036)))),k=[{path:"/dashboard",component:g},{path:"/controle",component:f},{path:"/rangementle",component:(0,n.lazy)((()=>Promise.all([a.e(540),a.e(826)]).then(a.bind(a,4826))))},{path:"/rangement",component:v},{path:"/welcome",component:b},{path:"/leads",component:j},{path:"/charts",component:N},{path:"/dimensions",component:y},{path:"/rotations",component:p.default},{path:"/explorer",component:h.default}];var w=a(5901);const A=(0,n.lazy)((()=>a.e(158).then(a.bind(a,2158))));const S=function(){const e=(0,n.useRef)(null),{pageTitle:t}=(0,l.v9)((e=>e.header));return(0,n.useEffect)((()=>{e.current.scroll({top:0,behavior:"smooth"})}),[t]),(0,m.jsxs)("div",{className:"drawer-content flex flex-col ",children:[(0,m.jsx)(x,{}),(0,m.jsxs)("main",{className:"flex-1 overflow-y-auto md:pt-4 pt-4 px-6  bg-base-200",ref:e,children:[(0,m.jsx)(n.Suspense,{fallback:(0,m.jsx)(w.Z,{}),children:(0,m.jsxs)(u.Z5,{children:[k.map(((e,t)=>(0,m.jsx)(u.AW,{exact:!0,path:"".concat(e.path),element:(0,m.jsx)(e.component,{})},t))),(0,m.jsx)(u.AW,{path:"*",element:(0,m.jsx)(A,{})})]})}),(0,m.jsx)("div",{className:"h-16"})]})]})};var T=a(1413),_=a(1087),E=a(5409);const C=function(e){let{submenu:t,name:a,icon:s}=e;const l=(0,u.TH)(),[r,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{t.filter((e=>e.path===l.pathname))[0]&&o(!0)}),[]),(0,m.jsxs)("div",{className:"flex flex-col",children:[(0,m.jsxs)("div",{className:"w-full block",onClick:()=>o(!r),children:[s," ",a,(0,m.jsx)(E.Z,{className:"w-5 h-5 mt-1 float-right delay-400 duration-500 transition-all  "+(r?"rotate-180":"")})]}),(0,m.jsx)("div",{className:" w-full "+(r?"":"hidden"),children:(0,m.jsx)("ul",{className:"menu menu-compact",children:t.map(((e,t)=>(0,m.jsx)("li",{children:(0,m.jsxs)(_.rU,{to:e.path,children:[e.icon," ",e.name,l.pathname==e.path?(0,m.jsx)("span",{className:"absolute mt-1 mb-1 inset-y-0 left-0 w-1 rounded-tr-md rounded-br-md bg-primary ","aria-hidden":"true"}):null]})},t)))})})]})};var R=a(9138),D=a(1207),P=a(7626),O=a(4343),I=a(6399),L=a(747),F=a(7915),Z=a(2986),z=a(9231),M=a(1676),V=a(5022),Y=a(6351),q=a(485);const B=(0,n.lazy)((()=>Promise.all([a.e(45),a.e(848),a.e(496)]).then(a.bind(a,9496)))),U=(0,n.lazy)((()=>Promise.all([a.e(640),a.e(678)]).then(a.bind(a,4678)))),W=(0,n.lazy)((()=>Promise.all([a.e(482),a.e(380)]).then(a.bind(a,9380)))),G=(0,n.lazy)((()=>Promise.all([a.e(45),a.e(352),a.e(77)]).then(a.bind(a,3077)))),Q=(0,n.lazy)((()=>Promise.all([a.e(45),a.e(949)]).then(a.bind(a,1949)))),H=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,8593)))),K=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,9076)))),J=(0,n.lazy)((()=>Promise.all([a.e(45),a.e(352),a.e(553)]).then(a.bind(a,7553)))),X=(0,n.lazy)((()=>a.e(36).then(a.bind(a,6036)))),$=(0,n.lazy)((()=>Promise.all([a.e(540),a.e(826)]).then(a.bind(a,4826)))),ee=(0,n.lazy)((()=>a.e(888).then(a.bind(a,1244)))),te="h-6 w-6",ae=()=>{console.log("[".concat((new Date).toISOString(),"] D\xe9connexion d\xe9clench\xe9e")),localStorage.clear(),console.log("[".concat((new Date).toISOString(),"] Stockage local vid\xe9 :"),localStorage),window.location.href="/login"},se=[{path:"/app/dashboard",component:B,icon:(0,m.jsx)(D.Z,{className:te}),name:"T\xe9l\xe9chargement des fichiers"},{path:"/app/leads",component:G,icon:(0,m.jsx)(F.Z,{className:te}),name:"Livraison"},{path:"/app/controle",component:J,icon:(0,m.jsx)(Y.Z,{className:te}),name:"Controle Livraison"},{path:"/app/dimensions",component:Q,icon:(0,m.jsx)(z.Z,{className:te}),name:"Dimensions"},{path:"/app/rotations",component:H,icon:(0,m.jsx)(M.Z,{className:te}),name:"Calcul des rotations"},{path:"/app/explorer",component:K,icon:(0,m.jsx)(V.Z,{className:te}),name:"Explorer Articles"},{path:"/app/rangementle",component:$,icon:(0,m.jsx)(q.Z,{className:te}),name:"Guide au rangement LE"},{path:"/app/rangement",component:X,icon:(0,m.jsx)(q.Z,{className:te}),name:"Guide au rangement global"},{path:"/app/charts",component:W,icon:(0,m.jsx)(L.Z,{className:te}),name:"Analytique"},{path:"",icon:(0,m.jsx)(I.Z,{className:"".concat(te," inline")}),name:"Param\xe8tres",submenu:[{path:"/forgot-password",component:ee,icon:(0,m.jsx)(Z.Z,{className:"h-5 w-5"}),name:"Mot de passe oubli\xe9"}]},{path:"/app/welcome",component:U,icon:(0,m.jsx)(P.Z,{className:te}),name:"Bienvenue"},{path:null,component:()=>ae(),icon:(0,m.jsx)(O.Z,{className:te}),name:"D\xe9connexion",onClick:ae}];const ne=function(){const e=(0,u.TH)();return(0,m.jsxs)("div",{className:"drawer-side z-30",children:[(0,m.jsx)("label",{htmlFor:"left-sidebar-drawer",className:"drawer-overlay"}),(0,m.jsxs)("ul",{className:"menu pt-2 w-80 bg-base-100 min-h-full text-base-content",children:[(0,m.jsx)("button",{className:"btn btn-ghost bg-base-300 btn-circle z-50 top-0 right-0 mt-4 mr-2 absolute lg:hidden",onClick:()=>{document.getElementById("left-sidebar-drawer").click()},children:(0,m.jsx)(R.Z,{className:"h-5 inline-block w-5"})}),(0,m.jsx)("li",{className:"mb-2 font-semibold text-xl",children:(0,m.jsxs)(_.rU,{to:"/app/welcome",children:[(0,m.jsx)("img",{className:"mask mask-squircle w-10",src:"/stock-management.png",alt:"OptiStock Logo"}),"OptiStock"]})}),se.map(((t,a)=>(0,m.jsx)("li",{children:t.submenu?(0,m.jsx)(C,(0,T.Z)({},t)):t.onClick?(0,m.jsxs)("button",{onClick:t.onClick,className:"font-normal flex items-center w-full p-2 rounded hover:bg-base-200",children:[t.icon," ",t.name]}):(0,m.jsxs)(_.OL,{end:!0,to:t.path,className:e=>{let{isActive:t}=e;return"".concat(t?"font-semibold bg-base-200":"font-normal")},children:[t.icon," ",t.name,e.pathname===t.path?(0,m.jsx)("span",{className:"absolute inset-y-0 left-0 w-1 rounded-tr-md rounded-br-md bg-primary","aria-hidden":"true"}):null]})},a)))]})]})};var le=a(9283);const re=function(){const{isOpen:e,bodyType:t,extraObject:a,header:s}=(0,l.v9)((e=>e.rightDrawer)),n=(0,l.I0)(),r=e=>{n((0,c.o8)(e))};return(0,m.jsxs)("div",{className:" fixed overflow-hidden z-20 bg-gray-900 bg-opacity-25 inset-0 transform ease-in-out "+(e?" transition-opacity opacity-100 duration-500 translate-x-0  ":" transition-all delay-500 opacity-0 translate-x-full  "),children:[(0,m.jsx)("section",{className:"w-80 md:w-96  right-0 absolute bg-base-100 h-full shadow-xl delay-400 duration-500 ease-in-out transition-all transform  "+(e?" translate-x-0 ":" translate-x-full "),children:(0,m.jsx)("div",{className:"relative  pb-5 flex flex-col  h-full",children:(0,m.jsxs)("div",{className:"navbar   flex pl-4 pr-4   shadow-md ",children:[(0,m.jsx)("button",{className:"float-left btn btn-circle btn-outline btn-sm",onClick:()=>r(),children:(0,m.jsx)(le.Z,{className:"h-5 w-5"})}),(0,m.jsx)("span",{className:"ml-2 font-bold text-xl",children:s})]})})}),(0,m.jsx)("section",{className:" w-screen h-full cursor-pointer ",onClick:()=>r()})]})};var oe=a(5054),ie=a(4221),ce=(a(1138),a(8060)),de=a(5524),me=a(9697),xe=a(190);const ue={first_name:"",last_name:"",email:""};const pe=function(e){let{closeModal:t}=e;const a=(0,l.I0)(),[s,r]=(0,n.useState)(!1),[o,i]=(0,n.useState)(""),[c,d]=(0,n.useState)(ue),x=e=>{let{updateType:t,value:a}=e;i(""),d((0,T.Z)((0,T.Z)({},c),{},{[t]:a}))};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(de.Z,{type:"text",defaultValue:c.first_name,updateType:"first_name",containerStyle:"mt-4",labelTitle:"First Name",updateFormValue:x}),(0,m.jsx)(de.Z,{type:"text",defaultValue:c.last_name,updateType:"last_name",containerStyle:"mt-4",labelTitle:"Last Name",updateFormValue:x}),(0,m.jsx)(de.Z,{type:"email",defaultValue:c.email,updateType:"email",containerStyle:"mt-4",labelTitle:"Email Id",updateFormValue:x}),(0,m.jsx)(me.Z,{styleClass:"mt-16",children:o}),(0,m.jsxs)("div",{className:"modal-action",children:[(0,m.jsx)("button",{className:"btn btn-ghost",onClick:()=>t(),children:"Cancel"}),(0,m.jsx)("button",{className:"btn btn-primary px-6",onClick:()=>(()=>{if(""===c.first_name.trim())return i("First Name is required!");if(""===c.email.trim())return i("Email id is required!");{let e={id:7,email:c.email,first_name:c.first_name,last_name:c.last_name,avatar:"https://reqres.in/img/faces/1-image.jpg"};a((0,xe.Yf)({newLeadObj:e})),a((0,oe.c0)({message:"New Lead Added!",status:1})),t()}})(),children:"Save"})]})]})};const he=function(e){let{extraObject:t,closeModal:a}=e;const s=(0,l.I0)(),{message:n,type:r,_id:o,index:i}=t;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{className:" text-xl mt-8 text-center",children:n}),(0,m.jsxs)("div",{className:"modal-action mt-12",children:[(0,m.jsx)("button",{className:"btn btn-outline   ",onClick:()=>a(),children:"Cancel"}),(0,m.jsx)("button",{className:"btn btn-primary w-36",onClick:()=>(async()=>{r===d.CONFIRMATION_MODAL_CLOSE_TYPES.LEAD_DELETE&&(s((0,xe.u9)({index:i})),s((0,oe.c0)({message:"Lead Deleted!",status:1}))),a()})(),children:"Yes"})]})]})};const ge=function(){const{isOpen:e,bodyType:t,size:a,extraObject:s,title:n}=(0,l.v9)((e=>e.modal)),r=(0,l.I0)(),o=e=>{r((0,ce.Mr)(e))};return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:"modal ".concat(e?"modal-open":""),children:(0,m.jsxs)("div",{className:"modal-box  ".concat("lg"===a?"max-w-5xl":""),children:[(0,m.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:()=>o(),children:"\u2715"}),(0,m.jsx)("h3",{className:"font-semibold text-2xl pb-6 text-center",children:n}),{[d.MODAL_BODY_TYPES.LEAD_ADD_NEW]:(0,m.jsx)(pe,{closeModal:o,extraObject:s}),[d.MODAL_BODY_TYPES.CONFIRMATION]:(0,m.jsx)(he,{extraObject:s,closeModal:o}),[d.MODAL_BODY_TYPES.DEFAULT]:(0,m.jsx)("div",{})}[t]]})})})};const be=function(){const e=(0,l.I0)(),{newNotificationMessage:t,newNotificationStatus:a}=(0,l.v9)((e=>e.header));return(0,n.useEffect)((()=>{""!==t&&(1===a&&ie.fn.success(t,"Success"),0===a&&ie.fn.error(t,"Error"),e((0,oe.DO)()))}),[t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"drawer  lg:drawer-open",children:[(0,m.jsx)("input",{id:"left-sidebar-drawer",type:"checkbox",className:"drawer-toggle"}),(0,m.jsx)(S,{}),(0,m.jsx)(ne,{})]}),(0,m.jsx)(re,{}),(0,m.jsx)(ie.mh,{}),(0,m.jsx)(ge,{})]})}},9076:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(2791),n=a(1989),l=a(184);const r=()=>{const[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)([]),[o,i]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null),[m,x]=(0,s.useState)(1),[u,p]=(0,s.useState)(""),[h,g]=(0,s.useState)(""),b="http://localhost:5000";(0,s.useEffect)((()=>{!async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;const s=localStorage.getItem("token");if(console.log("Token:",s),!s)return d("Aucune session trouv\xe9e. Redirection vers la connexion..."),i(!1),void setTimeout((()=>{window.location.href="/login"}),2e3);for(let u=1;u<=e;u++)try{const e=await n.Z.get("".concat(b,"/explorer"),{headers:{Authorization:"Bearer ".concat(s)},timeout:3e4});if(console.log("API Response:",e.data.data),!e.data||!e.data.data)throw new Error("Invalid response data");return t(e.data.data),r(e.data.data),void i(!1)}catch(x){var l,o,c,m;const t=(null===(l=x.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message)||x.message||"\xc9chec de la r\xe9cup\xe9ration des articles";if(console.error("[".concat((new Date).toISOString(),"] API Error (Attempt ").concat(u,"):"),(null===(c=x.response)||void 0===c?void 0:c.data)||x.message),401===(null===(m=x.response)||void 0===m?void 0:m.status)||t.toLowerCase().includes("token"))return d("Session expir\xe9e. Redirection vers la connexion..."),localStorage.removeItem("token"),i(!1),void setTimeout((()=>{window.location.href="/login"}),2e3);u===e?(d(t.includes("404")?"Ressource non trouv\xe9e":t),i(!1)):(await new Promise((e=>setTimeout(e,a))),console.log("Retrying... Attempt ".concat(u+1,"/").concat(e)))}}()}),[]),(0,s.useEffect)((()=>{console.log("Articles before filtering:",e);const t=e.filter((e=>{var t,a;const s=e.article?e.article.toString():"",n=(null===(t=e.type_stock)||void 0===t?void 0:t.toLowerCase())||"",l=(null===(a=e.designation_type_stock)||void 0===a?void 0:a.toLowerCase())||"",r=u.toLowerCase(),o=s.includes(r)||n.includes(r)||l.includes(r),i=""===h||e.type_stock===h;return o&&i}));console.log("Filtered Articles:",t),r(t),x(1)}),[u,h,e]);const N=25*m,j=N-25,y=a.slice(j,N),f=Math.ceil(a.length/25),v=[...new Set(e.map((e=>e.type_stock)).filter(Boolean))];return o?(0,l.jsx)("div",{className:"flex items-center justify-center h-screen bg-gradient-to-b from-gray-50 to-gray-100",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 border-4 border-gray-400 border-t-transparent rounded-full animate-spin"}),(0,l.jsx)("p",{className:"mt-4 text-lg font-medium text-gray-600",children:"Chargement des articles... Veuillez patienter."})]})}):c?(0,l.jsx)("div",{className:"flex items-center justify-center h-screen bg-gradient-to-b from-gray-50 to-gray-100",children:(0,l.jsxs)("div",{className:"text-center bg-white p-8 rounded-xl shadow-lg",children:[(0,l.jsx)("p",{className:"text-xl font-semibold text-red-600 mb-4",children:c}),c.includes("Redirection")?null:(0,l.jsx)("button",{className:"px-6 py-2 bg-gray-300 text-gray-900 rounded-lg hover:bg-gray-400 transition duration-300",onClick:()=>{i(!0),d(null),window.location.reload()},children:"R\xe9essayer"})]})}):(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 py-12",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,l.jsx)("h1",{className:"text-4xl font-extrabold text-gray-900 mb-8 text-center tracking-tight",children:"Exploration des Articles"}),(0,l.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"Rechercher par article, type de stock ou d\xe9signation...",value:u,onChange:e=>p(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 w-full sm:w-1/2","aria-label":"Rechercher par article, type de stock ou d\xe9signation"}),(0,l.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 w-full sm:w-1/4","aria-label":"Filtrer par type de stock",children:[(0,l.jsx)("option",{value:"",children:"Tous les types de stock"}),v.map((e=>(0,l.jsx)("option",{value:e,children:e},e)))]})]}),0===a.length?(0,l.jsx)("p",{className:"text-center text-lg text-gray-500",children:"Aucun article \xe0 afficher."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"hidden md:block bg-white bg-opacity-80 backdrop-blur-md rounded-xl shadow-xl overflow-hidden",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full border-collapse",children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{className:"bg-gray-200 text-gray-900",children:["Code SAP","D\xe9signation Article","Num\xe9ro Magasin","Division","Magasin","Emplacement","Type Magasin","Quantit\xe9","Unit\xe9 Qt\xe9 Base","Type de Stock","D\xe9signation Type Stock","Groupe Valorisation","Prix","Valeur Stock","Devise"].map((e=>(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold tracking-wide",children:e},e)))})}),(0,l.jsx)("tbody",{children:y.map(((e,t)=>(0,l.jsxs)("tr",{className:"transition duration-200 ".concat(t%2===0?"bg-white":"bg-gray-50"," hover:bg-gray-100"),children:[(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.article||"N/A"}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.designation_article||"N/A"}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.numero_magasin||"N/A"}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.division||"N/A"}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.magasin||"N/A"}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.emplacement||"N/A"}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.type_magasin||"N/A"}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.quantite||"N/A"}),(0,l.jsx)("td",{style:{maxWidth:"150px"},className:"px-4 py-3 text-sm text-gray-600",children:e.unite_qte_base||"N/A"}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.type_stock||"N/A"}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.designation_type_stock||"N/A"}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.groupe_valorisation||"N/A"}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.prix||"N/A"}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.valeur_stock||"N/A"}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.devise||"N/A"})]},t)))})]})})}),(0,l.jsx)("div",{className:"md:hidden space-y-4",children:y.map(((e,t)=>(0,l.jsx)("div",{className:"bg-white bg-opacity-80 backdrop-blur-md rounded-xl shadow-lg p-6 transition duration-300 hover:bg-opacity-100",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"Code SAP :"}),(0,l.jsx)("p",{className:"text-gray-900",children:e.article||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"D\xe9signation Article :"}),(0,l.jsx)("p",{className:"text-gray-900",children:e.designation_article||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"Num\xe9ro Magasin :"}),(0,l.jsx)("p",{className:"text-gray-900",children:e.numero_magasin||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"Division :"}),(0,l.jsx)("p",{className:"text-gray-900",children:e.division||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"Magasin :"}),(0,l.jsx)("p",{className:"text-gray-900",children:e.magasin||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"Emplacement :"}),(0,l.jsx)("p",{className:"text-gray-900",children:e.emplacement||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"Type Magasin :"}),(0,l.jsx)("p",{className:"text-gray-900",children:e.type_magasin||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"Quantit\xe9 :"}),(0,l.jsx)("p",{className:"text-gray-900",children:e.quantite||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"Unit\xe9 Qt\xe9 Base :"}),(0,l.jsx)("p",{className:"text-gray-900",children:e.unite_qte_base||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"Type de Stock :"}),(0,l.jsx)("p",{className:"text-gray-900",children:e.type_stock||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"D\xe9signation Type Stock :"}),(0,l.jsx)("p",{className:"text-gray-900",children:e.designation_type_stock||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"Groupe Valorisation :"}),(0,l.jsx)("p",{className:"text-gray-900",children:e.groupe_valorisation||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"Prix :"}),(0,l.jsx)("p",{className:"text-gray-900",children:e.prix||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"Valeur Stock :"}),(0,l.jsx)("p",{className:"text-gray-900",children:e.valeur_stock||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:"Devise :"}),(0,l.jsx)("p",{className:"text-gray-900",children:e.devise||"N/A"})]})]})},t)))}),(0,l.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,l.jsx)("button",{onClick:()=>{m>1&&x(m-1)},disabled:1===m,className:"px-4 py-2 rounded-lg ".concat(1===m?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gray-300 text-gray-900 hover:bg-gray-400"," transition duration-300"),children:"Pr\xe9c\xe9dent"}),(0,l.jsxs)("span",{className:"text-gray-600",children:["Page ",m," sur ",f]}),(0,l.jsx)("button",{onClick:()=>{m<f&&x(m+1)},disabled:m===f,className:"px-4 py-2 rounded-lg ".concat(m===f?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gray-300 text-gray-900 hover:bg-gray-400"," transition duration-300"),children:"Suivant"})]})]})]})})}},8593:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(2791),n=a(184);const l=()=>{const[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(""),[r,o]=(0,s.useState)({key:null,direction:null}),[i,c]=(0,s.useState)("all"),[d,m]=(0,s.useState)("all"),[x,u]=(0,s.useState)(!0),[p,h]=(0,s.useState)(null),[g,b]=(0,s.useState)("2025"),[N,j]=(0,s.useState)(null),[y,f]=(0,s.useState)(1);(0,s.useEffect)((()=>{(async()=>{if(!g)return j("Veuillez s\xe9lectionner une ann\xe9e."),void u(!1);j(null);try{const e=await fetch("http://localhost:5000/rotation/kpi?years=".concat(g));if(!e.ok)throw new Error("Failed to fetch KPI data");const a=await e.json(),s=a.map((e=>({id:e.id||"N/A",totalExits:"Aucune Sortie"===e.totalExits?0:Number(e.totalExits)||0,averageStock:"Aucune Donn\xe9e de Stock"===e.averageStock?0:Number(e.averageStock)||0,turnoverRate:"Non Calcul\xe9"===e.turnoverRate||"Aucune Sortie"===e.turnoverRate?0:Number(e.turnoverRate)||0,stockoutTasks:"Aucune T\xe2che de Pr\xe9l\xe8vement"===e.stockoutTasks?0:Number(e.stockoutTasks)||0,totalPickupTasks:"Aucune T\xe2che de Pr\xe9l\xe8vement"===e.totalPickupTasks?0:Number(e.totalPickupTasks)||0,stockoutRate:"Non Calcul\xe9"===e.stockoutRate||"Aucune Rupture de Stock"===e.stockoutRate?0:Number(e.stockoutRate)||0}))).sort(((e,t)=>{const a=e.turnoverRate>0&&e.stockoutRate>0?1:0,s=t.turnoverRate>0&&t.stockoutRate>0?1:0;return a!==s?s-a:t.turnoverRate-e.turnoverRate}));t(s),u(!1)}catch(e){h(e.message),u(!1)}})()}),[g]);const v=a=>{let s="asc";r.key===a&&"asc"===r.direction&&(s="desc"),o({key:a,direction:s});const n=[...e].sort(((e,t)=>{const n="Aucune Donn\xe9e"===e[a]?0:e[a],l="Aucune Donn\xe9e"===t[a]?0:t[a];return n<l?"asc"===s?-1:1:n>l?"asc"===s?1:-1:0}));t(n)},k=e.filter((e=>e.id.includes(a)&&("all"===i||"high"===i&&e.turnoverRate>1||"low"===i&&e.turnoverRate<1)&&("all"===d||"high"===d&&e.stockoutRate>10||"low"===d&&e.stockoutRate<10))),w=25*y,A=w-25,S=k.slice(A,w),T=Math.ceil(k.length/25),_=e=>f(e);return x?(0,n.jsx)("div",{className:"container mx-auto p-6",children:"Chargement..."}):p?(0,n.jsxs)("div",{className:"container mx-auto p-6 text-red-500",children:["Erreur : ",p]}):N?(0,n.jsx)("div",{className:"container mx-auto p-6 text-red-500",children:N}):(0,n.jsx)("div",{className:"container mx-auto p-6",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"KPI des Stocks par Article"}),(0,n.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row gap-4",children:[(0,n.jsx)("input",{type:"text",placeholder:"Filtrer par ID d'article...",value:a,onChange:e=>{l(e.target.value),f(1)},className:"border border-gray-300 rounded-lg p-2 w-full sm:w-1/4 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Filtrer les articles par ID"}),(0,n.jsxs)("select",{value:i,onChange:e=>{c(e.target.value),f(1)},className:"border border-gray-300 rounded-lg p-2 w-full sm:w-1/4 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Filtrer par taux de rotation",children:[(0,n.jsx)("option",{value:"all",children:"Tous les taux de rotation"}),(0,n.jsx)("option",{value:"high",children:"Taux de rotation > 1"}),(0,n.jsx)("option",{value:"low",children:"Taux de rotation < 1"})]}),(0,n.jsxs)("select",{value:d,onChange:e=>{m(e.target.value),f(1)},className:"border border-gray-300 rounded-lg p-2 w-full sm:w-1/4 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Filtrer par taux de rupture",children:[(0,n.jsx)("option",{value:"all",children:"Tous les taux de rupture"}),(0,n.jsx)("option",{value:"high",children:"Taux de rupture > 10%"}),(0,n.jsx)("option",{value:"low",children:"Taux de rupture < 10%"})]}),(0,n.jsxs)("select",{value:g,onChange:e=>{b(e.target.value),f(1)},className:"border border-gray-300 rounded-lg p-2 w-full sm:w-1/4 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"S\xe9lectionner l'ann\xe9e",children:[(0,n.jsx)("option",{value:"",children:"S\xe9lectionner une ann\xe9e"}),["2020","2021","2022","2023","2024","2025"].map((e=>(0,n.jsx)("option",{value:e,children:e},e)))]})]}),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full border-collapse",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"bg-blue-600 text-white",children:[(0,n.jsxs)("th",{className:"p-3 text-left cursor-pointer",onClick:()=>v("id"),role:"button","aria-sort":"id"===r.key?r.direction:"none",children:["Article ","id"===r.key&&("asc"===r.direction?"\u2191":"\u2193")]}),(0,n.jsxs)("th",{className:"p-3 text-left cursor-pointer",onClick:()=>v("totalExits"),role:"button","aria-sort":"totalExits"===r.key?r.direction:"none",children:["Total Sorties ","totalExits"===r.key&&("asc"===r.direction?"\u2191":"\u2193")]}),(0,n.jsxs)("th",{className:"p-3 text-left cursor-pointer",onClick:()=>v("averageStock"),role:"button","aria-sort":"averageStock"===r.key?r.direction:"none",children:["Stock Moyen ","averageStock"===r.key&&("asc"===r.direction?"\u2191":"\u2193")]}),(0,n.jsxs)("th",{className:"p-3 text-left cursor-pointer",onClick:()=>v("turnoverRate"),role:"button","aria-sort":"turnoverRate"===r.key?r.direction:"none",children:["Taux de Rotation ","turnoverRate"===r.key&&("asc"===r.direction?"\u2191":"\u2193")]}),(0,n.jsxs)("th",{className:"p-3 text-left cursor-pointer",onClick:()=>v("stockoutTasks"),role:"button","aria-sort":"stockoutTasks"===r.key?r.direction:"none",children:["T\xe2ches de Rupture ","stockoutTasks"===r.key&&("asc"===r.direction?"\u2191":"\u2193")]}),(0,n.jsxs)("th",{className:"p-3 text-left cursor-pointer",onClick:()=>v("totalPickupTasks"),role:"button","aria-sort":"totalPickupTasks"===r.key?r.direction:"none",children:["Total T\xe2ches de Pr\xe9l\xe8vement ","totalPickupTasks"===r.key&&("asc"===r.direction?"\u2191":"\u2193")]}),(0,n.jsxs)("th",{className:"p-3 text-left cursor-pointer",onClick:()=>v("stockoutRate"),role:"button","aria-sort":"stockoutRate"===r.key?r.direction:"none",children:["Taux de Rupture (%) ","stockoutRate"===r.key&&("asc"===r.direction?"\u2191":"\u2193")]})]})}),(0,n.jsx)("tbody",{children:0===S.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"7",className:"p-3 text-center text-gray-500",children:"Aucun article trouv\xe9."})}):S.map((e=>(0,n.jsxs)("tr",{className:"border-b ".concat(e.turnoverRate>1||e.stockoutRate>10?"bg-yellow-100 text-yellow-700 font-semibold":"even:bg-gray-50"),children:[(0,n.jsx)("td",{className:"p-3",children:e.id}),(0,n.jsx)("td",{className:"p-3",children:isNaN(e.totalExits)||0===e.totalExits?"_":e.totalExits.toFixed(2)}),(0,n.jsx)("td",{className:"p-3",children:isNaN(e.averageStock)||0===e.averageStock?"_":e.averageStock.toFixed(2)}),(0,n.jsxs)("td",{className:"p-3 flex items-center",children:[isNaN(e.turnoverRate)||0===e.turnoverRate?"_":e.turnoverRate.toFixed(2),e.turnoverRate>1&&(0,n.jsx)("span",{className:"ml-2 text-yellow-600","aria-label":"Alerte : taux de rotation \xe9lev\xe9",children:"\u26a0\ufe0f"})]}),(0,n.jsx)("td",{className:"p-3",children:isNaN(e.stockoutTasks)||0===e.stockoutTasks?"_":e.stockoutTasks}),(0,n.jsx)("td",{className:"p-3",children:isNaN(e.totalPickupTasks)||0===e.totalPickupTasks?"_":e.totalPickupTasks}),(0,n.jsxs)("td",{className:"p-3 flex items-center",children:[isNaN(e.stockoutRate)||0===e.stockoutRate?"_":"".concat(e.stockoutRate.toFixed(2),"%"),e.stockoutRate>10&&(0,n.jsx)("span",{className:"ml-2 text-red-600","aria-label":"Alerte : taux de rupture \xe9lev\xe9",children:"\u26a0\ufe0f"})]})]},e.id)))})]})}),(0,n.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,n.jsx)("button",{onClick:()=>_(y-1),disabled:1===y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg disabled:bg-gray-300",children:"Pr\xe9c\xe9dent"}),(0,n.jsxs)("span",{children:["Page ",y," sur ",T]}),(0,n.jsx)("button",{onClick:()=>_(y+1),disabled:y===T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg disabled:bg-gray-300",children:"Suivant"})]}),(0,n.jsxs)("p",{className:"mt-4 text-sm text-gray-600",children:[(0,n.jsx)("strong",{children:"Remarque :"})," Les articles avec un taux de rotation sup\xe9rieur \xe0 1 ou un taux de rupture sup\xe9rieur \xe0 10% sont en surbrillance avec une alerte."]})]})})}},9313:e=>{e.exports=Object.freeze({MODAL_BODY_TYPES:{USER_DETAIL:"USER_DETAIL",LEAD_ADD_NEW:"LEAD_ADD_NEW",CONFIRMATION:"CONFIRMATION",DEFAULT:""},RIGHT_DRAWER_TYPES:{NOTIFICATION:"NOTIFICATION",CALENDAR_EVENTS:"CALENDAR_EVENTS"},CONFIRMATION_MODAL_CLOSE_TYPES:{LEAD_DELETE:"LEAD_DELETE"}})}}]);
//# sourceMappingURL=791.dd3c43cc.chunk.js.map